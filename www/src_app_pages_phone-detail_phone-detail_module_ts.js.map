{"version":3,"file":"src_app_pages_phone-detail_phone-detail_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAED;AAEtD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,+DAAe;KAC3B;CACF,CAAC;IAMW,4BAA4B,SAA5B,4BAA4B;CAAG;AAA/B,4BAA4B;IAJxC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,4BAA4B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;AChBA;AACM;AACmB;AAErB;AAEgC;AAEvB;IAYzC,qBAAqB,SAArB,qBAAqB;CAAG;AAAxB,qBAAqB;IAVjC,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,+DAAmB;YACnB,sFAA4B;SAC7B;QACD,YAAY,EAAE,CAAC,+DAAe,CAAC;KAChC,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBlC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAQac,eAAe,SAAfA,eAAe;EAS1BC,YACUC,SADV,EAEUC,IAFV,EAGUC,KAHV,EAIUC,MAJV,EAKUC,GALV,EAMUC,KANV,EAOUC,MAPV,EAQUC,OARV,EASUC,KATV,EAS+B;IARrB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAhBV,mBAAmB,IAAnB;IACA,mBAAcX,iFAAd;IACA,YAAY,sDAAZ;EAkBC;;EAEDa,QAAQ;IACN,KAAKF,KAAL,CAAWG,WAAX,CAAuBC,SAAvB,CAAiCC,MAAM,IAAG;MACxC,KAAKC,OAAL,GAAeD,MAAM,CAAC,SAAD,CAArB;IACH,CAFC;IAGA,KAAKE,IAAL,GAAY,IAAI5B,qDAAJ,CAAc;MACxB6B,KAAK,EAAE,IAAI9B,uDAAJ,CAAgB,IAAhB,EAAsB;QAC3B+B,UAAU,EAAE,CAAC7B,+DAAD,EAAsBA,gEAAA,CAAqB,EAArB,CAAtB,EAAgDA,gEAAA,CAAqB,EAArB,CAAhD;MADe,CAAtB;IADiB,CAAd,CAAZ;EAKD;;EAGDiC,iBAAiB,CAACC,MAAD,EAAO;IACtBC,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACG,MAAP,CAAcC,KAAd,CAAoBC,QAApB,EAAZ;IACA,KAAKC,WAAL,GAAmBN,MAAM,CAACG,MAAP,CAAcC,KAAd,CAAoBC,QAApB,EAAnB;EACD;;EAEKE,MAAM;IAAA;;IAAA;MACV,IAAI,CAAC,KAAI,CAACC,QAAV,EACA,IAAI;QACF,IAAI,CAAC,KAAI,CAACf,IAAL,CAAUgB,KAAf,EAAsB;UACpB,KAAI,CAAChB,IAAL,CAAUiB,gBAAV;;UACA;QACD;;QACDT,OAAO,CAACC,GAAR,CAAY,KAAI,CAACT,IAAL,CAAUW,KAAtB;QACA,KAAI,CAACI,QAAL,GAAgB,IAAhB;QAEAP,OAAO,CAACC,GAAR,CAAY,KAAI,CAACV,OAAjB;QAEA,MAAMmB,QAAQ,SAAS,KAAI,CAAChC,IAAL,CAAUiC,qBAAV,CAAgC,KAAI,CAACN,WAAL,GAAmB,KAAI,CAACb,IAAL,CAAUW,KAAV,CAAgBV,KAAnE,CAAvB;QAEA,KAAI,CAACc,QAAL,GAAgB,KAAhB;QACA,MAAMK,OAAO,GAAiB;UAC5BC,SAAS,EAAE3C,mEADiB;UAE5B4C,cAAc,EAAE;YACdrB,KAAK,EAAE,KAAI,CAACD,IAAL,CAAUW,KAAV,CAAgBV,KADT;YAEdsB,WAAW,EAAE,KAAI,CAACV;UAFJ,CAFY;UAM5BW,YAAY,EAAE;QANc,CAA9B;;QAQA,MAAMC,KAAK,GAAG,KAAI,CAACxC,SAAL,CAAeyC,MAAf,CAAsBN,OAAtB,CAAd;;QACA,OAAOK,KAAP,EAAcE,OAAd;QACA,MAAMC,IAAI,GAAQ,OAAOH,KAAP,EAAcI,aAAd,EAAlB;;QACA,KAAI,CAAC1C,KAAL,CAAW2C,kBAAX;UAAA,4IAA8B,WAAOC,IAAP,EAAc;YAC1C,IAAIA,IAAJ,EAAS;cACX,MAAMC,MAAM,SAAS,KAAI,CAACzC,MAAL,CAAY0C,UAAZ,CAAuB,KAAI,CAAClC,OAAL,CAAagC,IAAb,CAAkBG,WAAzC,EAAsD,KAAI,CAACnC,OAAL,CAAagC,IAAb,CAAkBI,KAAxE,EAA+E,KAAI,CAACpC,OAAL,CAAagC,IAAb,CAAkBK,QAAlB,IAA8B,EAA7G,EAAiH,KAAI,CAACvB,WAAL,GAAmB,KAAI,CAACb,IAAL,CAAUW,KAAV,CAAgBV,KAApJ,EAA2J8B,IAAI,CAACM,GAAhK,CAArB;cACA,MAAM,KAAI,CAAC9C,MAAL,CAAY+C,UAAZ,CAAuB,MAAvB,EAA+B,CAA/B,EAAkC,MAAlC,EAA0C,MAA1C,CAAN;;cACA,KAAI,CAAClD,MAAL,CAAYmD,aAAZ,CAA0B,MAA1B;YACG;;YACD,KAAI,CAAC/C,OAAL,CAAagD,UAAb;UACD,CAPD;;UAAA;YAAA;UAAA;QAAA;MASD,CAjCD,CAiCE,OAAMC,CAAN,EAAS;QACTjC,OAAO,CAACC,GAAR,CAAYgC,CAAZ;;QACA,KAAI,CAACjD,OAAL,CAAakD,SAAb,CAAuB,OAAvB,EAAgCC,IAAI,CAACC,SAAL,CAAeH,CAAf,CAAhC;;QACA,KAAI,CAAC1B,QAAL,GAAgB,KAAhB;MACD;IAvCS;EAwCX;;AAjFyB;;;QAbnBvC,2DAAeA;;QAEfG,sEAAWA;;QALXT,qDAAIA;;QAEYK,oDAAMA;;QACLE,yDAAaA;;QAH9BP,qDAAIA;;QAMJU,0EAAaA;;QACbC,4EAAcA;;QALdP,4DAAcA;;;AAcVS,eAAe,uDAL3Bd,yDAAS,CAAC;EACT4E,QAAQ,EAAE,kBADD;EAETC,UAAAA,+DAFS;;AAAA,CAAD,CAKkB,GAAf/D,eAAe,CAAf","sources":["./src/app/pages/phone-detail/phone-detail-routing.module.ts","./src/app/pages/phone-detail/phone-detail.module.ts","./src/app/pages/phone-detail/phone-detail.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PhoneDetailPage } from './phone-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PhoneDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PhoneDetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PhoneDetailPageRoutingModule } from './phone-detail-routing.module';\n\nimport { PhoneDetailPage } from './phone-detail.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    PhoneDetailPageRoutingModule\n  ],\n  declarations: [PhoneDetailPage]\n})\nexport class PhoneDetailPageModule {}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { Auth, linkWithCredential, PhoneAuthProvider } from '@angular/fire/auth';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ModalController, NavController, ModalOptions } from '@ionic/angular';\nimport { OtpComponent } from 'src/app/otp/otp.component';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { AvatarService } from 'src/app/services/avatar.service';\nimport { OverlayService } from 'src/app/services/overlay.service';\nimport { environment } from 'src/environments/environment';\n\n\n@Component({\n  selector: 'app-phone-detail',\n  templateUrl: './phone-detail.page.html',\n  styleUrls: ['./phone-detail.page.scss'],\n})\nexport class PhoneDetailPage implements OnInit {\n  form: FormGroup;\n  CountryCode: any = '+1';\n  CountryJson = environment.CountryJson;\n  flag: any = \"https://cdn.kcak11.com/CountryFlags/countries/ng.svg\";\n  user: any;\n  approve: boolean;\n  approve2: boolean;\n  details: any;\n  constructor(\n    private modalCtrl: ModalController,\n    private auth: AuthService,\n    private authy: Auth,\n    private router: Router,\n    private nav: NavController,\n    private authY: Auth,\n    private avatar: AvatarService,\n    private overlay: OverlayService,\n    private route: ActivatedRoute,\n  ) { \n\n    \n  }\n\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      this.details = params[\"details\"];\n  });\n    this.form = new FormGroup({\n      phone: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(10), Validators.maxLength(10)]\n      }),\n    });\n  }\n\n\n  countryCodeChange($event) {\n    console.log($event.detail.value.toString());\n    this.CountryCode = $event.detail.value.toString();\n  }\n\n  async signIn() {\n    if (!this.approve2)\n    try {\n      if (!this.form.valid) {\n        this.form.markAllAsTouched();\n        return;\n      }\n      console.log(this.form.value);\n      this.approve2 = true;\n\n      console.log(this.details);\n  \n      const response = await this.auth.signInWithPhoneNumber(this.CountryCode + this.form.value.phone);\n  \n      this.approve2 = false;\n      const options: ModalOptions = {\n        component: OtpComponent,\n        componentProps: {\n          phone: this.form.value.phone,\n          countryCode: this.CountryCode,\n        },\n        swipeToClose: true\n      };\n      const modal = this.modalCtrl.create(options);\n      (await modal).present();\n      const data: any = (await modal).onWillDismiss();\n      this.authy.onAuthStateChanged(async (user)=>{\n        if (user){\n      const result = await this.avatar.createUser(this.details.user.displayName, this.details.user.email, this.details.user.photoURL || '', this.CountryCode + this.form.value.phone, user.uid)\n      await this.avatar.createCard('Cash', 0, 'cash', 'None')\n      this.router.navigateByUrl('home');\n        }\n        this.overlay.hideLoader();\n      })\n      \n    } catch(e) {\n      console.log(e);\n      this.overlay.showAlert('Error', JSON.stringify(e));\n      this.approve2 = false;\n    }\n  }\n\n}\n"],"names":["Component","Auth","FormControl","FormGroup","Validators","ActivatedRoute","Router","ModalController","NavController","OtpComponent","AuthService","AvatarService","OverlayService","environment","PhoneDetailPage","constructor","modalCtrl","auth","authy","router","nav","authY","avatar","overlay","route","CountryJson","ngOnInit","queryParams","subscribe","params","details","form","phone","validators","required","minLength","maxLength","countryCodeChange","$event","console","log","detail","value","toString","CountryCode","signIn","approve2","valid","markAllAsTouched","response","signInWithPhoneNumber","options","component","componentProps","countryCode","swipeToClose","modal","create","present","data","onWillDismiss","onAuthStateChanged","user","result","createUser","displayName","email","photoURL","uid","createCard","navigateByUrl","hideLoader","e","showAlert","JSON","stringify","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}