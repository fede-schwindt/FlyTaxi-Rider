{"version":3,"file":"src_app_login_login_module_ts.js","mappings":"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","sources":["./src/app/login/login-routing.module.ts","./src/app/login/login.module.ts","./src/app/login/login.page.ts","./node_modules/@codetrix-studio/capacitor-google-auth/dist/esm/definitions.js","./node_modules/@codetrix-studio/capacitor-google-auth/dist/esm/index.js"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [LoginPage],\n})\nexport class LoginPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NavigationExtras, Router } from '@angular/router';\nimport { isPlatform, ModalController, ModalOptions, NavController } from '@ionic/angular';\nimport { OtpComponent } from '../otp/otp.component';\nimport { AuthService } from '../services/auth.service';\nimport { environment } from '../../environments/environment';\nimport { OverlayService } from '../services/overlay.service';\nimport { GoogleAuth } from '@codetrix-studio/capacitor-google-auth';\nimport { deleteUser, GoogleAuthProvider, signInWithCredential } from '@angular/fire/auth';\nimport { Auth } from '@angular/fire/auth/';\nimport { StatusBar, Style } from '@capacitor/status-bar';\nimport { AvatarService } from '../services/avatar.service';\nimport { SplashScreen } from '@capacitor/splash-screen';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  form: FormGroup;\n  CountryCode: any;\n  CountryJson = environment.CountryJson;\n  flag: any = \"https://cdn.kcak11.com/CountryFlags/countries/ng.svg\";\n  \n  user: any;\n  approve: boolean;\n  approve2: boolean;\n  \n\n  slideOpts = {\n    initialSlide: 0,\n    speed: 300,\n    autoplay:true\n  };\n  numberT: string;\n  constructor(\n    private modalCtrl: ModalController,\n    private auth: AuthService,\n    private router: Router,\n    private nav: NavController,\n    private authY: Auth,\n    private avatar: AvatarService,\n    private overlay: OverlayService,\n  ) \n  { \n    if (!isPlatform('capacitor')){\n      GoogleAuth.initialize();\n     }\n     let country = 'Nigeria'\n     this.CountryCode = '+1'\n     this.numberT = '+1'\n  }\n\n  async HideSplash()\n  {\n    await SplashScreen.hide();\n  }\n\n  \n\n  async ngOnInit() {\n  \n    this.form = new FormGroup({\n      phone: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(10), Validators.maxLength(10)]\n      }),\n    });\n\n    // this.router.navigateByUrl('details');\n   // this.show();\n  }\n\n  countryCodeChange($event) {\n    console.log($event.detail.value.toString());\n    this.CountryCode = '';\n    this.numberT = $event.detail.value.toString();\n  }\n\n  async Show(){\n    await StatusBar.setOverlaysWebView({ overlay: false });\n   \n  }\n\n  async Hide(){\n    await StatusBar.setOverlaysWebView({ overlay: true });\n   \n  }\n\n\n\n  async signIn() {\n    try {\n      if (!this.form.valid) {\n        this.form.markAllAsTouched();\n        return;\n      }\n      console.log(this.form.value);\n      this.approve2 = true;\n      const response = await this.auth.signInWithPhoneNumber(this.numberT + this.form.value.phone);\n      this.approve2 = false;\n      const options: ModalOptions = {\n        component: OtpComponent,\n        componentProps: {\n          phone: this.form.value.phone,\n          countryCode: this.numberT,\n        },\n        swipeToClose: true\n      };\n      const modal = this.modalCtrl.create(options);\n      (await modal).present();\n      const data: any = (await modal).onWillDismiss();\n      this.authY.onAuthStateChanged(async (user)=>{\n        if (!user){\n       this.router.navigateByUrl('details'); \n        }else{\n          this.router.navigateByUrl('home'); \n        }  \n       this.overlay.hideLoader();\n      })\n       console.log(data);\n    } catch(e) {\n      console.log(e);\n      this.overlay.showAlert('Error', JSON.stringify(e));\n      this.approve2 = false;\n    }\n  }\n\n  async loginWithGoogle(){\n\n    try {\n\n     this.approve = true;\n\n     let googleUser = await GoogleAuth.signIn();\n   \n     const credential = GoogleAuthProvider.credential(googleUser.authentication.idToken);\n\n     const sToken = await signInWithCredential(this.authY, credential);\n     if (sToken.user.phoneNumber){\n     const result = await this.avatar.createUser(sToken.user.displayName, sToken.user.email, sToken.user.photoURL || '', sToken.user.phoneNumber|| 94909220, this.authY.currentUser.uid)\n     await this.avatar.createCard('Cash', 0, 'cash', 'None')\n     this.router.navigateByUrl('home');\n     }else{\n      await deleteUser(this.authY.currentUser)\n      let navigationExtras: NavigationExtras = {\n        queryParams: {\n            details: sToken,\n        }\n     };\n      this.nav.navigateForward('phone-detail', navigationExtras);\n     }\n\n\n     console.log(sToken);\n    \n      \n      this.approve = false;\n\n  } catch(e) {\n    this.overlay.showAlert('Error', JSON.stringify(e));\n    this.approve = false;\n  }\n\n  }\n\n}\n","/// <reference types=\"@capacitor/cli\" />\nexport {};\n","import { registerPlugin } from '@capacitor/core';\nconst GoogleAuth = registerPlugin('GoogleAuth', {\n    web: () => import('./web').then((m) => new m.GoogleAuthWeb()),\n});\nexport * from './definitions';\nexport { GoogleAuth };\n"],"names":["Component","FormControl","FormGroup","Validators","Router","isPlatform","ModalController","NavController","OtpComponent","AuthService","environment","OverlayService","GoogleAuth","deleteUser","GoogleAuthProvider","signInWithCredential","Auth","StatusBar","AvatarService","SplashScreen","LoginPage","constructor","modalCtrl","auth","router","nav","authY","avatar","overlay","CountryJson","initialSlide","speed","autoplay","initialize","country","CountryCode","numberT","HideSplash","hide","ngOnInit","form","phone","validators","required","minLength","maxLength","countryCodeChange","$event","console","log","detail","value","toString","Show","setOverlaysWebView","Hide","signIn","valid","markAllAsTouched","approve2","response","signInWithPhoneNumber","options","component","componentProps","countryCode","swipeToClose","modal","create","present","data","onWillDismiss","onAuthStateChanged","user","navigateByUrl","hideLoader","e","showAlert","JSON","stringify","loginWithGoogle","approve","googleUser","credential","authentication","idToken","sToken","phoneNumber","result","createUser","displayName","email","photoURL","currentUser","uid","createCard","navigationExtras","queryParams","details","navigateForward","selector","template","registerPlugin","web","then","m","GoogleAuthWeb"],"sourceRoot":"webpack:///","x_google_ignoreList":[3,4]}